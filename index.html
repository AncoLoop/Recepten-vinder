<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Vind het perfecte recept op basis van ingredi√´nten, bereidingswijze en je persoonlijke voorkeuren.">
    <title>Recepten Vinder - Vind het perfecte recept</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=DM+Sans:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --cream: #FDF6E3;
            --warm-white: #FFFBF5;
            --terracotta: #C75B39;
            --terracotta-light: #E8A090;
            --olive: #5C6B4A;
            --olive-light: #8FA876;
            --charcoal: #2D2926;
            --warm-gray: #6B6560;
            --sand: #E8DFD0;
            --golden: #D4A84B;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'DM Sans', sans-serif;
            background: var(--cream);
            color: var(--charcoal);
            min-height: 100vh;
            overflow-x: hidden;
        }

        .bg-pattern {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background-image: 
                radial-gradient(circle at 20% 80%, var(--terracotta-light) 0%, transparent 25%),
                radial-gradient(circle at 80% 20%, var(--olive-light) 0%, transparent 20%),
                radial-gradient(circle at 50% 50%, var(--sand) 0%, transparent 50%);
            opacity: 0.3;
            pointer-events: none;
            z-index: 0;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 40px 24px;
            position: relative;
            z-index: 1;
        }

        header {
            text-align: center;
            margin-bottom: 32px;
            animation: fadeInDown 0.8s ease-out;
        }

        @keyframes fadeInDown {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .logo {
            display: inline-flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
        }

        .logo-icon {
            width: 56px;
            height: 56px;
            background: var(--terracotta);
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            transform: rotate(-5deg);
            box-shadow: 0 4px 12px rgba(199, 91, 57, 0.3);
        }

        h1 {
            font-family: 'Playfair Display', serif;
            font-size: 3rem;
            font-weight: 700;
            color: var(--charcoal);
            letter-spacing: -1px;
        }

        .tagline {
            color: var(--warm-gray);
            font-size: 1.1rem;
            margin-top: 8px;
        }

        .tab-nav {
            display: flex;
            justify-content: center;
            gap: 8px;
            margin-bottom: 32px;
            background: var(--warm-white);
            padding: 8px;
            border-radius: 100px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        .tab-btn {
            padding: 12px 24px;
            border: none;
            background: transparent;
            font-family: 'DM Sans', sans-serif;
            font-size: 1rem;
            font-weight: 500;
            color: var(--warm-gray);
            border-radius: 100px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .tab-btn:hover { color: var(--charcoal); }
        .tab-btn.active { background: var(--terracotta); color: white; }

        .tab-btn .badge {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            min-width: 20px;
            height: 20px;
            background: var(--olive);
            color: white;
            border-radius: 10px;
            font-size: 0.75rem;
            margin-left: 8px;
        }

        .tab-btn.active .badge { background: white; color: var(--terracotta); }

        .tab-content { display: none; }
        .tab-content.active { display: block; animation: fadeInUp 0.5s ease-out; }

        .main-card {
            background: var(--warm-white);
            border-radius: 32px;
            padding: 40px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.02), 0 12px 24px rgba(0,0,0,0.04), 0 24px 48px rgba(0,0,0,0.04);
        }

        .form-section { margin-bottom: 32px; }

        .section-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
        }

        .section-number {
            width: 32px;
            height: 32px;
            background: var(--olive);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 0.9rem;
        }

        .section-title {
            font-family: 'Playfair Display', serif;
            font-size: 1.4rem;
            font-weight: 600;
        }

        .main-input {
            width: 100%;
            padding: 18px 24px;
            font-size: 1.1rem;
            font-family: 'DM Sans', sans-serif;
            border: 2px solid var(--sand);
            border-radius: 16px;
            background: var(--cream);
            transition: all 0.3s ease;
            outline: none;
        }

        .main-input:focus {
            border-color: var(--terracotta);
            box-shadow: 0 0 0 4px rgba(199, 91, 57, 0.1);
        }

        .main-input::placeholder { color: var(--warm-gray); }

        .chip-grid { display: flex; flex-wrap: wrap; gap: 10px; }

        .chip {
            padding: 12px 20px;
            background: var(--cream);
            border: 2px solid var(--sand);
            border-radius: 100px;
            font-size: 0.95rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.25s ease;
            user-select: none;
        }

        .chip:hover { border-color: var(--terracotta-light); transform: translateY(-2px); }

        .chip.selected {
            background: var(--terracotta);
            border-color: var(--terracotta);
            color: white;
            box-shadow: 0 4px 12px rgba(199, 91, 57, 0.3);
        }

        .chip-icon { margin-right: 6px; }

        .time-slider-container { padding: 0 8px; }
        .time-display { text-align: center; margin-bottom: 16px; }

        .time-value {
            font-family: 'Playfair Display', serif;
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--terracotta);
        }

        .time-label { color: var(--warm-gray); font-size: 0.9rem; }

        .time-slider {
            width: 100%;
            height: 8px;
            -webkit-appearance: none;
            appearance: none;
            background: linear-gradient(to right, var(--olive-light), var(--terracotta));
            border-radius: 4px;
            outline: none;
        }

        .time-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 28px;
            height: 28px;
            background: white;
            border: 3px solid var(--terracotta);
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(0,0,0,0.15);
        }

        .time-markers {
            display: flex;
            justify-content: space-between;
            margin-top: 8px;
            color: var(--warm-gray);
            font-size: 0.8rem;
        }

        .person-selector { display: flex; align-items: center; gap: 20px; }

        .person-btn {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            border: 2px solid var(--sand);
            background: var(--cream);
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .person-btn:hover {
            border-color: var(--terracotta);
            background: var(--terracotta);
            color: white;
        }

        .person-count {
            font-family: 'Playfair Display', serif;
            font-size: 2rem;
            font-weight: 700;
            min-width: 60px;
            text-align: center;
        }

        .person-label { color: var(--warm-gray); font-size: 0.9rem; }

        .extra-toggle {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            color: var(--warm-gray);
            cursor: pointer;
            padding: 12px;
            margin: -12px auto 24px;
            transition: color 0.2s ease;
        }

        .extra-toggle:hover { color: var(--terracotta); }

        .extra-options {
            display: none;
            padding-top: 24px;
            border-top: 1px dashed var(--sand);
            margin-top: 24px;
        }

        .extra-options.visible { display: block; animation: fadeInUp 0.4s ease-out; }

        .submit-section { margin-top: 40px; text-align: center; }

        .submit-btn {
            background: linear-gradient(135deg, var(--terracotta) 0%, #A84832 100%);
            color: white;
            border: none;
            padding: 20px 48px;
            font-size: 1.2rem;
            font-weight: 600;
            font-family: 'DM Sans', sans-serif;
            border-radius: 100px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 8px 24px rgba(199, 91, 57, 0.4);
        }

        .submit-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 32px rgba(199, 91, 57, 0.5);
        }

        .submit-btn:disabled {
            background: var(--sand);
            box-shadow: none;
            cursor: not-allowed;
            transform: none;
        }

        .search-status { display: none; text-align: center; padding: 40px; }
        .search-status.visible { display: block; }

        .search-spinner {
            width: 48px;
            height: 48px;
            border: 4px solid var(--sand);
            border-top-color: var(--terracotta);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 16px;
        }

        @keyframes spin { to { transform: rotate(360deg); } }

        .search-status-text { color: var(--warm-gray); font-size: 1rem; }

        .search-step {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            margin-top: 12px;
            font-size: 0.9rem;
        }

        .search-step.completed { color: var(--olive); }
        .search-step.active { color: var(--terracotta); font-weight: 600; }

        .results-section { margin-top: 48px; display: none; }
        .results-section.visible { display: block; animation: fadeInUp 0.6s ease-out; }

        .results-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }

        .results-title { font-family: 'Playfair Display', serif; font-size: 1.8rem; }

        .results-source {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            background: var(--cream);
            border-radius: 100px;
            font-size: 0.9rem;
        }

        .source-library { color: var(--olive); }
        .source-online { color: var(--terracotta); }

        .recipe-grid { display: grid; gap: 24px; }

        .recipe-card {
            background: var(--warm-white);
            border-radius: 24px;
            overflow: hidden;
            box-shadow: 0 4px 16px rgba(0,0,0,0.06);
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
        }

        .recipe-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
        }

        .recipe-card.from-library::before {
            content: 'üìö Uit bibliotheek';
            position: absolute;
            top: 12px;
            right: 12px;
            background: var(--olive);
            color: white;
            padding: 4px 12px;
            border-radius: 100px;
            font-size: 0.75rem;
            font-weight: 600;
            z-index: 5;
        }

        .recipe-card.from-online::before {
            content: 'üåê Online gevonden';
            position: absolute;
            top: 12px;
            right: 12px;
            background: var(--terracotta);
            color: white;
            padding: 4px 12px;
            border-radius: 100px;
            font-size: 0.75rem;
            font-weight: 600;
            z-index: 5;
        }

        .recipe-image {
            height: 180px;
            background: linear-gradient(135deg, var(--sand) 0%, var(--terracotta-light) 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 4rem;
        }

        .recipe-content { padding: 24px; }

        .recipe-tags { display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 12px; }

        .recipe-tag {
            padding: 4px 12px;
            background: var(--cream);
            border-radius: 100px;
            font-size: 0.8rem;
            color: var(--warm-gray);
        }

        .recipe-tag.time { background: var(--olive-light); color: white; }

        .recipe-name {
            font-family: 'Playfair Display', serif;
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .recipe-description {
            color: var(--warm-gray);
            font-size: 0.95rem;
            line-height: 1.5;
        }

        .recipe-meta {
            display: flex;
            flex-wrap: wrap;
            gap: 16px;
            margin-top: 16px;
            padding-top: 16px;
            border-top: 1px solid var(--sand);
        }

        .meta-item {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 0.9rem;
            color: var(--warm-gray);
        }

        .recipe-rating { display: flex; align-items: center; gap: 4px; margin-top: 12px; }
        .rating-star { color: var(--golden); font-size: 1.1rem; }
        .rating-star.empty { color: var(--sand); }

        .library-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
            flex-wrap: wrap;
            gap: 16px;
        }

        .library-filters { display: flex; gap: 8px; flex-wrap: wrap; }

        .filter-btn {
            padding: 8px 16px;
            border: 2px solid var(--sand);
            background: var(--cream);
            border-radius: 100px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.2s ease;
            font-family: 'DM Sans', sans-serif;
        }

        .filter-btn:hover, .filter-btn.active {
            border-color: var(--terracotta);
            background: var(--terracotta);
            color: white;
        }

        .empty-library { text-align: center; padding: 60px 20px; color: var(--warm-gray); }
        .empty-library-icon { font-size: 4rem; margin-bottom: 16px; }

        .empty-library h3 {
            font-family: 'Playfair Display', serif;
            font-size: 1.5rem;
            color: var(--charcoal);
            margin-bottom: 8px;
        }

        /* Modal */
        .modal-overlay {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(45, 41, 38, 0.8);
            backdrop-filter: blur(4px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            padding: 20px;
        }

        .modal-overlay.visible { opacity: 1; visibility: visible; }

        .modal-container {
            background: var(--warm-white);
            border-radius: 32px;
            max-width: 700px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            transform: translateY(20px);
            transition: transform 0.3s ease;
        }

        .modal-overlay.visible .modal-container { transform: translateY(0); }

        .modal-close {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: none;
            background: var(--cream);
            font-size: 1.2rem;
            cursor: pointer;
            z-index: 10;
            transition: all 0.2s ease;
        }

        .modal-close:hover { background: var(--terracotta); color: white; }

        .modal-body { padding: 40px; }

        .modal-header {
            display: flex;
            align-items: flex-start;
            gap: 20px;
            margin-bottom: 24px;
        }

        .modal-emoji { font-size: 4rem; line-height: 1; }

        .modal-title {
            font-family: 'Playfair Display', serif;
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .modal-source {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 4px 12px;
            background: var(--cream);
            border-radius: 100px;
            font-size: 0.85rem;
            margin-bottom: 8px;
        }

        .modal-source a { color: var(--terracotta); text-decoration: none; }
        .modal-source a:hover { text-decoration: underline; }

        .modal-tags { display: flex; flex-wrap: wrap; gap: 8px; }

        .modal-description {
            color: var(--warm-gray);
            font-size: 1.05rem;
            line-height: 1.6;
            margin-bottom: 24px;
        }

        .modal-stats {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 16px;
            background: var(--cream);
            border-radius: 20px;
            padding: 24px;
            margin-bottom: 32px;
        }

        .stat-item { text-align: center; }
        .stat-icon { font-size: 1.5rem; margin-bottom: 4px; }

        .stat-value {
            font-family: 'Playfair Display', serif;
            font-size: 1.4rem;
            font-weight: 700;
            color: var(--terracotta);
        }

        .stat-label { font-size: 0.8rem; color: var(--warm-gray); }

        .modal-section { margin-bottom: 28px; }

        .modal-section-title {
            font-family: 'Playfair Display', serif;
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 16px;
            padding-bottom: 8px;
            border-bottom: 2px solid var(--sand);
        }

        .ingredients-list {
            list-style: none;
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
        }

        .ingredients-list li {
            padding: 10px 16px;
            background: var(--cream);
            border-radius: 10px;
            font-size: 0.95rem;
        }

        .ingredients-list li::before {
            content: '‚Ä¢';
            color: var(--terracotta);
            font-weight: bold;
            margin-right: 8px;
        }

        .steps-list { list-style: none; counter-reset: steps; }

        .steps-list li {
            counter-increment: steps;
            padding: 16px 16px 16px 56px;
            position: relative;
            background: var(--cream);
            border-radius: 12px;
            margin-bottom: 12px;
            line-height: 1.5;
        }

        .steps-list li::before {
            content: counter(steps);
            position: absolute;
            left: 16px;
            top: 50%;
            transform: translateY(-50%);
            width: 28px;
            height: 28px;
            background: var(--olive);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 0.9rem;
        }

        .rating-section {
            background: var(--cream);
            border-radius: 20px;
            padding: 24px;
            text-align: center;
            margin-bottom: 24px;
        }

        .rating-section h4 {
            font-family: 'Playfair Display', serif;
            font-size: 1.2rem;
            margin-bottom: 16px;
        }

        .rating-stars { display: flex; justify-content: center; gap: 8px; }

        .rating-star-btn {
            font-size: 2rem;
            background: none;
            border: none;
            cursor: pointer;
            transition: transform 0.2s ease;
            color: var(--sand);
        }

        .rating-star-btn:hover { transform: scale(1.2); }
        .rating-star-btn.active { color: var(--golden); }

        .rating-feedback {
            margin-top: 12px;
            font-size: 0.9rem;
            color: var(--olive);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .rating-feedback.visible { opacity: 1; }

        .modal-actions { display: flex; gap: 12px; margin-top: 32px; }

        .action-btn {
            flex: 1;
            padding: 16px 24px;
            border-radius: 100px;
            font-size: 1rem;
            font-weight: 600;
            font-family: 'DM Sans', sans-serif;
            cursor: pointer;
            transition: all 0.2s ease;
            border: none;
        }

        .action-btn.primary { background: var(--terracotta); color: white; }
        .action-btn.primary:hover { background: #A84832; transform: translateY(-2px); }

        .action-btn.secondary {
            background: var(--cream);
            color: var(--charcoal);
            border: 2px solid var(--sand);
        }

        .action-btn.secondary:hover { border-color: var(--terracotta); color: var(--terracotta); }

        .action-btn.danger {
            background: #f5f5f5;
            color: #c53030;
            border: 2px solid #fed7d7;
        }

        .action-btn.danger:hover { background: #fed7d7; }

        .footer {
            text-align: center;
            padding: 32px 0;
            color: var(--warm-gray);
            font-size: 0.9rem;
        }

        .footer a { color: var(--terracotta); text-decoration: none; }
        .footer a:hover { text-decoration: underline; }

        @media (max-width: 640px) {
            .container { padding: 24px 16px; }
            h1 { font-size: 2.2rem; }
            .main-card { padding: 24px; border-radius: 24px; }
            .chip { padding: 10px 16px; font-size: 0.9rem; }
            .tab-nav { flex-wrap: wrap; }
            .tab-btn { flex: 1; min-width: 100px; }
            .modal-body { padding: 24px; }
            .modal-header { flex-direction: column; align-items: center; text-align: center; }
            .modal-stats { grid-template-columns: repeat(2, 1fr); }
            .ingredients-list { grid-template-columns: 1fr; }
            .modal-actions { flex-direction: column; }
            .results-header { flex-direction: column; gap: 12px; align-items: flex-start; }
            .library-header { flex-direction: column; align-items: flex-start; }
        }
    </style>
</head>
<body>
    <div class="bg-pattern"></div>
    
    <div class="container">
        <header>
            <div class="logo">
                <div class="logo-icon">üç≥</div>
                <h1>Recepten Vinder</h1>
            </div>
            <p class="tagline">Vind het perfecte recept - uit je bibliotheek of vers van het internet</p>
        </header>

        <nav class="tab-nav">
            <button class="tab-btn active" data-tab="search">üîç Zoeken</button>
            <button class="tab-btn" data-tab="library">üìö Bibliotheek <span class="badge" id="libraryCount">0</span></button>
        </nav>

        <div class="tab-content active" id="searchTab">
            <div class="main-card">
                <div class="form-section">
                    <div class="section-header">
                        <div class="section-number">1</div>
                        <h2 class="section-title">Wat is je hoofdingredi√´nt?</h2>
                    </div>
                    <input type="text" class="main-input" id="ingredient" placeholder="bijv. kip, zalm, aubergine, tofu...">
                    <div class="chip-grid" style="margin-top: 12px;">
                        <div class="chip ingredient-chip" data-value="kip"><span class="chip-icon">üçó</span>Kip</div>
                        <div class="chip ingredient-chip" data-value="rundvlees"><span class="chip-icon">ü•©</span>Rundvlees</div>
                        <div class="chip ingredient-chip" data-value="vis"><span class="chip-icon">üêü</span>Vis</div>
                        <div class="chip ingredient-chip" data-value="garnalen"><span class="chip-icon">ü¶ê</span>Garnalen</div>
                        <div class="chip ingredient-chip" data-value="tofu"><span class="chip-icon">üßà</span>Tofu</div>
                        <div class="chip ingredient-chip" data-value="groenten"><span class="chip-icon">ü•¨</span>Groenten</div>
                    </div>
                </div>

                <div class="form-section">
                    <div class="section-header">
                        <div class="section-number">2</div>
                        <h2 class="section-title">Wat voor maaltijd?</h2>
                    </div>
                    <div class="chip-grid">
                        <div class="chip meal-chip" data-value="ontbijt"><span class="chip-icon">üåÖ</span>Ontbijt</div>
                        <div class="chip meal-chip" data-value="lunch"><span class="chip-icon">‚òÄÔ∏è</span>Lunch</div>
                        <div class="chip meal-chip" data-value="diner"><span class="chip-icon">üåô</span>Diner</div>
                        <div class="chip meal-chip" data-value="snack"><span class="chip-icon">üçø</span>Snack</div>
                        <div class="chip meal-chip" data-value="dessert"><span class="chip-icon">üç∞</span>Dessert</div>
                    </div>
                </div>

                <div class="form-section">
                    <div class="section-header">
                        <div class="section-number">3</div>
                        <h2 class="section-title">Bereidingswijze</h2>
                    </div>
                    <div class="chip-grid">
                        <div class="chip method-chip" data-value="oven"><span class="chip-icon">üî•</span>Oven</div>
                        <div class="chip method-chip" data-value="pan"><span class="chip-icon">üç≥</span>Pan</div>
                        <div class="chip method-chip" data-value="bbq"><span class="chip-icon">üî•</span>BBQ</div>
                        <div class="chip method-chip" data-value="airfryer"><span class="chip-icon">üí®</span>Airfryer</div>
                        <div class="chip method-chip" data-value="slowcooker"><span class="chip-icon">ü•ò</span>Slow cooker</div>
                        <div class="chip method-chip" data-value="wok"><span class="chip-icon">ü•¢</span>Wok</div>
                        <div class="chip method-chip" data-value="geen voorkeur"><span class="chip-icon">‚ú®</span>Geen voorkeur</div>
                    </div>
                </div>

                <div class="form-section">
                    <div class="section-header">
                        <div class="section-number">4</div>
                        <h2 class="section-title">Beschikbare tijd</h2>
                    </div>
                    <div class="time-slider-container">
                        <div class="time-display">
                            <div class="time-value" id="timeValue">30</div>
                            <div class="time-label">minuten</div>
                        </div>
                        <input type="range" class="time-slider" id="timeSlider" min="10" max="120" value="30" step="5">
                        <div class="time-markers">
                            <span>10 min</span>
                            <span>30 min</span>
                            <span>60 min</span>
                            <span>90 min</span>
                            <span>2 uur</span>
                        </div>
                    </div>
                </div>

                <div class="form-section">
                    <div class="section-header">
                        <div class="section-number">5</div>
                        <h2 class="section-title">Voor hoeveel personen?</h2>
                    </div>
                    <div class="person-selector">
                        <button class="person-btn" id="decreaseBtn">‚àí</button>
                        <div>
                            <div class="person-count" id="personCount">2</div>
                            <div class="person-label">personen</div>
                        </div>
                        <button class="person-btn" id="increaseBtn">+</button>
                    </div>
                </div>

                <div class="extra-toggle" id="extraToggle">
                    <span>Meer opties</span>
                    <span id="toggleIcon">‚ñº</span>
                </div>

                <div class="extra-options" id="extraOptions">
                    <div class="form-section">
                        <div class="section-header">
                            <div class="section-number">6</div>
                            <h2 class="section-title">Setting</h2>
                        </div>
                        <div class="chip-grid">
                            <div class="chip setting-chip" data-value="doordeweeks"><span class="chip-icon">üìÖ</span>Doordeweeks</div>
                            <div class="chip setting-chip" data-value="weekend"><span class="chip-icon">üõãÔ∏è</span>Weekend</div>
                            <div class="chip setting-chip" data-value="met kinderen"><span class="chip-icon">üë®‚Äçüë©‚Äçüëß</span>Met kinderen</div>
                            <div class="chip setting-chip" data-value="date night"><span class="chip-icon">üíë</span>Date night</div>
                            <div class="chip setting-chip" data-value="feestje"><span class="chip-icon">üéâ</span>Feestje</div>
                            <div class="chip setting-chip" data-value="meal prep"><span class="chip-icon">üì¶</span>Meal prep</div>
                        </div>
                    </div>

                    <div class="form-section">
                        <div class="section-header">
                            <div class="section-number">7</div>
                            <h2 class="section-title">Thema / Dieet</h2>
                        </div>
                        <div class="chip-grid">
                            <div class="chip theme-chip" data-value="gezond"><span class="chip-icon">ü•ó</span>Gezond</div>
                            <div class="chip theme-chip" data-value="comfort food"><span class="chip-icon">üçù</span>Comfort food</div>
                            <div class="chip theme-chip" data-value="low carb"><span class="chip-icon">ü•ë</span>Low carb</div>
                            <div class="chip theme-chip" data-value="vegetarisch"><span class="chip-icon">üå±</span>Vegetarisch</div>
                            <div class="chip theme-chip" data-value="vegan"><span class="chip-icon">üåø</span>Vegan</div>
                            <div class="chip theme-chip" data-value="high protein"><span class="chip-icon">üí™</span>High protein</div>
                        </div>
                    </div>

                    <div class="form-section">
                        <div class="section-header">
                            <div class="section-number">8</div>
                            <h2 class="section-title">Keukenstijl</h2>
                        </div>
                        <div class="chip-grid">
                            <div class="chip cuisine-chip" data-value="italiaans"><span class="chip-icon">üáÆüáπ</span>Italiaans</div>
                            <div class="chip cuisine-chip" data-value="aziatisch"><span class="chip-icon">ü•¢</span>Aziatisch</div>
                            <div class="chip cuisine-chip" data-value="mexicaans"><span class="chip-icon">üåÆ</span>Mexicaans</div>
                            <div class="chip cuisine-chip" data-value="hollands"><span class="chip-icon">üá≥üá±</span>Hollands</div>
                            <div class="chip cuisine-chip" data-value="mediterraan"><span class="chip-icon">ü´í</span>Mediterraan</div>
                            <div class="chip cuisine-chip" data-value="indiaas"><span class="chip-icon">üçõ</span>Indiaas</div>
                        </div>
                    </div>

                    <div class="form-section">
                        <div class="section-header">
                            <div class="section-number">9</div>
                            <h2 class="section-title">Extra ingredi√´nten (optioneel)</h2>
                        </div>
                        <input type="text" class="main-input" id="extraIngredients" placeholder="bijv. paprika, rijst, sojasaus...">
                    </div>
                </div>

                <div class="submit-section">
                    <button class="submit-btn" id="findRecipes">‚ú® Vind recepten</button>
                </div>
            </div>

            <div class="search-status" id="searchStatus">
                <div class="search-spinner"></div>
                <p class="search-status-text" id="statusText">Recepten zoeken...</p>
                <div id="searchSteps">
                    <div class="search-step" id="step1">üìö Zoeken in je bibliotheek...</div>
                    <div class="search-step" id="step2">üåê Online recepten zoeken...</div>
                    <div class="search-step" id="step3">‚ú® Beste recepten selecteren...</div>
                </div>
            </div>

            <div class="results-section" id="results">
                <div class="results-header">
                    <h2 class="results-title" id="resultsTitle">üéâ Gevonden recepten</h2>
                    <div class="results-source" id="resultsSource"></div>
                </div>
                <div class="recipe-grid" id="recipeGrid"></div>
            </div>
        </div>

        <div class="tab-content" id="libraryTab">
            <div class="main-card">
                <div class="library-header">
                    <h2 class="section-title">üìö Mijn Recepten Bibliotheek</h2>
                    <div class="library-filters">
                        <button class="filter-btn active" data-filter="all">Alles</button>
                        <button class="filter-btn" data-filter="favorites">‚≠ê Favorieten</button>
                        <button class="filter-btn" data-filter="recent">üïê Recent</button>
                    </div>
                </div>
                <div id="libraryContent">
                    <div class="empty-library" id="emptyLibrary">
                        <div class="empty-library-icon">üìñ</div>
                        <h3>Je bibliotheek is nog leeg</h3>
                        <p>Zoek naar recepten en sla je favorieten op!</p>
                    </div>
                    <div class="recipe-grid" id="libraryGrid"></div>
                </div>
            </div>
        </div>

        <footer class="footer">
            <p>Gemaakt met ‚ù§Ô∏è | <a href="https://github.com/AncoLoop/recepten-vinder" target="_blank">GitHub</a></p>
        </footer>
    </div>

    <div class="modal-overlay" id="recipeModal">
        <div class="modal-container">
            <button class="modal-close" onclick="closeModal()">‚úï</button>
            <div class="modal-body" id="modalContent"></div>
        </div>
    </div>

    <script>
        // Configuration
        const CONFIG = {
            ANTHROPIC_API_KEY: '', // Voeg je API key hier toe voor online zoeken
            MIN_LIBRARY_RESULTS: 3,
            MAX_RESULTS: 6,
            TIME_TOLERANCE: 15
        };

        // State
        let state = { ingredient: '', meal: '', method: '', time: 30, persons: 2, setting: '', theme: '', cuisine: '', extraIngredients: '' };
        let library = JSON.parse(localStorage.getItem('recipeLibrary') || '[]');
        let currentRecipe = null;
        window.currentSearchResults = [];

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            updateLibraryCount();
            initializeFormHandlers();
            initializeTabNavigation();
            initializeModalHandlers();
        });

        function updateLibraryCount() {
            const badge = document.getElementById('libraryCount');
            if (badge) badge.textContent = library.length;
        }

        function initializeTabNavigation() {
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
                    document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                    btn.classList.add('active');
                    document.getElementById(btn.dataset.tab + 'Tab')?.classList.add('active');
                    if (btn.dataset.tab === 'library') renderLibrary();
                });
            });
        }

        function initializeFormHandlers() {
            setupChipSelection('ingredient-chip', 'ingredient');
            setupChipSelection('meal-chip', 'meal');
            setupChipSelection('method-chip', 'method');
            setupChipSelection('setting-chip', 'setting');
            setupChipSelection('theme-chip', 'theme');
            setupChipSelection('cuisine-chip', 'cuisine');

            document.getElementById('ingredient')?.addEventListener('input', (e) => {
                state.ingredient = e.target.value;
                document.querySelectorAll('.ingredient-chip').forEach(c => c.classList.remove('selected'));
            });

            document.getElementById('extraIngredients')?.addEventListener('input', (e) => {
                state.extraIngredients = e.target.value;
            });

            const timeSlider = document.getElementById('timeSlider');
            const timeValue = document.getElementById('timeValue');
            timeSlider?.addEventListener('input', (e) => {
                state.time = parseInt(e.target.value);
                timeValue.textContent = state.time;
            });

            document.getElementById('decreaseBtn')?.addEventListener('click', () => {
                if (state.persons > 1) {
                    state.persons--;
                    document.getElementById('personCount').textContent = state.persons;
                }
            });

            document.getElementById('increaseBtn')?.addEventListener('click', () => {
                if (state.persons < 20) {
                    state.persons++;
                    document.getElementById('personCount').textContent = state.persons;
                }
            });

            document.getElementById('extraToggle')?.addEventListener('click', () => {
                const opts = document.getElementById('extraOptions');
                const icon = document.getElementById('toggleIcon');
                opts?.classList.toggle('visible');
                if (icon) icon.textContent = opts?.classList.contains('visible') ? '‚ñ≤' : '‚ñº';
            });

            document.getElementById('findRecipes')?.addEventListener('click', handleSearch);

            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    renderLibrary(btn.dataset.filter);
                });
            });
        }

        function setupChipSelection(className, stateKey) {
            document.querySelectorAll(`.${className}`).forEach(chip => {
                chip.addEventListener('click', () => {
                    document.querySelectorAll(`.${className}`).forEach(c => c.classList.remove('selected'));
                    chip.classList.add('selected');
                    state[stateKey] = chip.dataset.value;
                    if (stateKey === 'ingredient') {
                        document.getElementById('ingredient').value = chip.dataset.value;
                    }
                });
            });
        }

        // Library Management
        function saveToLibrary(recipe) {
            if (!library.find(r => r.id === recipe.id)) {
                recipe.savedAt = new Date().toISOString();
                library.push(recipe);
                localStorage.setItem('recipeLibrary', JSON.stringify(library));
                updateLibraryCount();
                return true;
            }
            return false;
        }

        function removeFromLibrary(recipeId) {
            library = library.filter(r => r.id !== recipeId);
            localStorage.setItem('recipeLibrary', JSON.stringify(library));
            updateLibraryCount();
            renderLibrary();
        }

        function updateRecipeRating(recipeId, rating) {
            const recipe = library.find(r => r.id === recipeId);
            if (recipe) {
                recipe.userRating = rating;
                localStorage.setItem('recipeLibrary', JSON.stringify(library));
            }
        }

        function searchLibrary(criteria) {
            return library.filter(recipe => {
                let matches = true;
                if (criteria.ingredient) {
                    const ing = criteria.ingredient.toLowerCase();
                    matches = matches && (recipe.ingredient?.toLowerCase().includes(ing) || recipe.name?.toLowerCase().includes(ing) || recipe.ingredients?.some(i => i.toLowerCase().includes(ing)));
                }
                if (criteria.method && criteria.method !== 'geen voorkeur') {
                    matches = matches && recipe.method === criteria.method;
                }
                if (criteria.time) {
                    matches = matches && recipe.time <= criteria.time + CONFIG.TIME_TOLERANCE;
                }
                if (recipe.userRating && recipe.userRating <= 2) matches = false;
                return matches;
            }).sort((a, b) => (b.userRating || 3) - (a.userRating || 3));
        }

        function renderLibrary(filter = 'all') {
            const grid = document.getElementById('libraryGrid');
            const empty = document.getElementById('emptyLibrary');
            if (!grid || !empty) return;

            let recipes = [...library];
            if (filter === 'favorites') recipes = recipes.filter(r => r.userRating >= 4);
            else if (filter === 'recent') recipes = recipes.sort((a, b) => new Date(b.savedAt) - new Date(a.savedAt)).slice(0, 10);

            if (recipes.length === 0) {
                empty.style.display = 'block';
                grid.innerHTML = '';
            } else {
                empty.style.display = 'none';
                grid.innerHTML = recipes.map(r => createRecipeCard(r, true)).join('');
            }
        }

        function createRecipeCard(recipe, fromLibrary = false) {
            const ratingHtml = recipe.userRating ? `<div class="recipe-rating">${[1,2,3,4,5].map(i => `<span class="rating-star ${i <= recipe.userRating ? '' : 'empty'}">‚òÖ</span>`).join('')}</div>` : '';
            return `
                <div class="recipe-card ${fromLibrary ? 'from-library' : 'from-online'}" onclick="showRecipeDetail('${recipe.id}', ${fromLibrary})">
                    <div class="recipe-image">${recipe.emoji || 'üçΩÔ∏è'}</div>
                    <div class="recipe-content">
                        <div class="recipe-tags">
                            <span class="recipe-tag time">‚è±Ô∏è ${recipe.time} min</span>
                            ${(recipe.tags || []).slice(0, 2).map(tag => `<span class="recipe-tag">${tag}</span>`).join('')}
                        </div>
                        <h3 class="recipe-name">${recipe.name}</h3>
                        <p class="recipe-description">${recipe.description}</p>
                        ${ratingHtml}
                        <div class="recipe-meta">
                            <div class="meta-item">üë• ${state.persons} pers</div>
                            <div class="meta-item">üìä ${recipe.difficulty || 'Gemiddeld'}</div>
                            <div class="meta-item">üî• ${recipe.calories || '~400'} kcal</div>
                        </div>
                    </div>
                </div>`;
        }

        // Modal
        function initializeModalHandlers() {
            document.getElementById('recipeModal')?.addEventListener('click', (e) => {
                if (e.target.id === 'recipeModal') closeModal();
            });
            document.addEventListener('keydown', (e) => { if (e.key === 'Escape') closeModal(); });
        }

        function showRecipeDetail(recipeId, fromLibrary = false) {
            let recipe = fromLibrary ? library.find(r => r.id === recipeId) : window.currentSearchResults?.find(r => r.id === recipeId);
            if (!recipe) return;
            currentRecipe = recipe;

            const isInLibrary = library.some(r => r.id === recipe.id);
            const currentRating = library.find(r => r.id === recipe.id)?.userRating || 0;

            document.getElementById('modalContent').innerHTML = `
                <div class="modal-header">
                    <div class="modal-emoji">${recipe.emoji || 'üçΩÔ∏è'}</div>
                    <div>
                        <div class="modal-source">${recipe.sourceUrl ? `üåê <a href="${recipe.sourceUrl}" target="_blank">${recipe.sourceName || 'Online'}</a>` : 'üìö Lokaal recept'}</div>
                        <h2 class="modal-title">${recipe.name}</h2>
                        <div class="modal-tags">${(recipe.tags || []).map(tag => `<span class="recipe-tag">${tag}</span>`).join('')}</div>
                    </div>
                </div>
                <p class="modal-description">${recipe.fullDescription || recipe.description}</p>
                <div class="modal-stats">
                    <div class="stat-item"><div class="stat-icon">‚è±Ô∏è</div><div class="stat-value">${recipe.time}</div><div class="stat-label">minuten</div></div>
                    <div class="stat-item"><div class="stat-icon">üë•</div><div class="stat-value">${state.persons}</div><div class="stat-label">personen</div></div>
                    <div class="stat-item"><div class="stat-icon">üìä</div><div class="stat-value">${recipe.difficulty || 'Gemiddeld'}</div><div class="stat-label">niveau</div></div>
                    <div class="stat-item"><div class="stat-icon">üî•</div><div class="stat-value">${recipe.calories || '~400'}</div><div class="stat-label">kcal</div></div>
                </div>
                ${isInLibrary ? `<div class="rating-section"><h4>Hoe vond je dit recept?</h4><div class="rating-stars">${[1,2,3,4,5].map(i => `<button class="rating-star-btn ${i <= currentRating ? 'active' : ''}" onclick="rateRecipe('${recipe.id}', ${i})">‚òÖ</button>`).join('')}</div><p class="rating-feedback ${currentRating > 0 ? 'visible' : ''}" id="ratingFeedback">${currentRating >= 4 ? '‚ù§Ô∏è Dit recept wordt vaker aanbevolen!' : currentRating <= 2 && currentRating > 0 ? 'üëã Wordt minder vaak getoond.' : ''}</p></div>` : ''}
                <div class="modal-section"><h3 class="modal-section-title">ü•ò Ingredi√´nten</h3><ul class="ingredients-list">${(recipe.ingredients || ['Niet beschikbaar']).map(i => `<li>${i}</li>`).join('')}</ul></div>
                <div class="modal-section"><h3 class="modal-section-title">üë®‚Äçüç≥ Bereiding</h3><ol class="steps-list">${(recipe.steps || ['Niet beschikbaar']).map(s => `<li>${s}</li>`).join('')}</ol></div>
                <div class="modal-actions">
                    ${!isInLibrary ? `<button class="action-btn primary" onclick="saveCurrentRecipe()">üìö Opslaan</button>` : `<button class="action-btn danger" onclick="removeCurrentRecipe()">üóëÔ∏è Verwijderen</button>`}
                    <button class="action-btn secondary" onclick="closeModal()">Sluiten</button>
                </div>`;

            document.getElementById('recipeModal').classList.add('visible');
            document.body.style.overflow = 'hidden';
        }

        function rateRecipe(recipeId, rating) {
            updateRecipeRating(recipeId, rating);
            document.querySelectorAll('.rating-star-btn').forEach((btn, i) => btn.classList.toggle('active', i < rating));
            const fb = document.getElementById('ratingFeedback');
            if (fb) {
                fb.textContent = rating >= 4 ? '‚ù§Ô∏è Dit recept wordt vaker aanbevolen!' : rating <= 2 ? 'üëã Wordt minder vaak getoond.' : 'üëç Bedankt!';
                fb.classList.add('visible');
            }
        }

        function saveCurrentRecipe() {
            if (currentRecipe && saveToLibrary(currentRecipe)) {
                alert('‚úÖ Opgeslagen!');
                showRecipeDetail(currentRecipe.id, true);
            }
        }

        function removeCurrentRecipe() {
            if (currentRecipe && confirm('Verwijderen?')) {
                removeFromLibrary(currentRecipe.id);
                closeModal();
            }
        }

        function closeModal() {
            document.getElementById('recipeModal')?.classList.remove('visible');
            document.body.style.overflow = '';
            currentRecipe = null;
        }

        // Search
        async function handleSearch() {
            const ingredient = state.ingredient || document.getElementById('ingredient')?.value || '';
            if (!ingredient.trim()) { alert('Vul een ingredi√´nt in.'); return; }

            const searchStatus = document.getElementById('searchStatus');
            const results = document.getElementById('results');
            const submitBtn = document.getElementById('findRecipes');
            const steps = { step1: document.getElementById('step1'), step2: document.getElementById('step2'), step3: document.getElementById('step3') };

            searchStatus?.classList.add('visible');
            results?.classList.remove('visible');
            if (submitBtn) submitBtn.disabled = true;

            try {
                steps.step1?.classList.add('active');
                await sleep(500);
                const libraryResults = searchLibrary({ ingredient, method: state.method, time: state.time });
                steps.step1?.classList.remove('active');
                steps.step1?.classList.add('completed');
                if (steps.step1) steps.step1.textContent = `üìö ${libraryResults.length} in bibliotheek`;

                let onlineResults = [];
                if (libraryResults.length < CONFIG.MIN_LIBRARY_RESULTS) {
                    steps.step2?.classList.add('active');
                    onlineResults = getFallbackRecipes({ ingredient, method: state.method });
                    steps.step2?.classList.remove('active');
                    steps.step2?.classList.add('completed');
                    if (steps.step2) steps.step2.textContent = `üåê ${onlineResults.length} suggesties`;
                } else {
                    if (steps.step2) steps.step2.textContent = `üåê Overgeslagen`;
                    steps.step2?.classList.add('completed');
                }

                steps.step3?.classList.add('active');
                await sleep(300);

                libraryResults.forEach(r => r.source = 'library');
                onlineResults.forEach(r => r.source = 'online');

                const allResults = [...libraryResults.filter(r => r.userRating >= 4), ...onlineResults, ...libraryResults.filter(r => !r.userRating || r.userRating < 4)].slice(0, CONFIG.MAX_RESULTS);
                window.currentSearchResults = allResults;

                steps.step3?.classList.remove('active');
                steps.step3?.classList.add('completed');
                searchStatus?.classList.remove('visible');

                const recipeGrid = document.getElementById('recipeGrid');
                if (allResults.length === 0) {
                    if (recipeGrid) recipeGrid.innerHTML = `<div class="empty-library"><div class="empty-library-icon">üîç</div><h3>Geen recepten gevonden</h3><p>Probeer andere criteria.</p></div>`;
                } else {
                    const lc = allResults.filter(r => r.source === 'library').length;
                    const oc = allResults.filter(r => r.source === 'online').length;
                    document.getElementById('resultsTitle').textContent = `üéâ ${allResults.length} recepten`;
                    document.getElementById('resultsSource').innerHTML = `${lc > 0 ? `<span class="source-library">üìö ${lc}</span>` : ''} ${oc > 0 ? `<span class="source-online">üåê ${oc}</span>` : ''}`;
                    if (recipeGrid) recipeGrid.innerHTML = allResults.map(r => createRecipeCard(r, r.source === 'library')).join('');
                }

                results?.classList.add('visible');
                results?.scrollIntoView({ behavior: 'smooth', block: 'start' });

            } finally {
                if (submitBtn) submitBtn.disabled = false;
                Object.values(steps).forEach(s => s?.classList.remove('active', 'completed'));
                if (steps.step1) steps.step1.textContent = 'üìö Zoeken in bibliotheek...';
                if (steps.step2) steps.step2.textContent = 'üåê Online zoeken...';
                if (steps.step3) steps.step3.textContent = '‚ú® Selecteren...';
            }
        }

        function sleep(ms) { return new Promise(r => setTimeout(r, ms)); }

        function getFallbackRecipes(criteria) {
            const recipes = {
                'kip': [
                    { id: 'kip-1', name: 'Krokante Kip met Honing-Mosterd', description: 'Malse kipfilet met een zoete honing-mosterdsaus.', emoji: 'üçó', time: 30, difficulty: 'Makkelijk', calories: 420, ingredient: 'kip', method: 'pan', tags: ['Snel', 'Familie'], ingredients: ['500g kipfilet', '3 el honing', '2 el mosterd', '2 el sojasaus', '1 teentje knoflook'], steps: ['Snijd kip in stukjes', 'Meng honing, mosterd, sojasaus en knoflook', 'Bak kip goudbruin', 'Voeg saus toe en bak 5 min'] },
                    { id: 'kip-2', name: 'Kip Teriyaki Bowl', description: 'Aziatische rijstbowl met sticky teriyaki kip.', emoji: 'ü•¢', time: 35, difficulty: 'Makkelijk', calories: 480, ingredient: 'kip', method: 'pan', tags: ['Aziatisch', 'Gezond'], ingredients: ['400g kipfilet', '300g rijst', '100ml sojasaus', '3 el honing', 'Sesamzaad', 'Lente-ui'], steps: ['Kook rijst gaar', 'Bak kip goudbruin', 'Maak teriyaki: soja + honing', 'Serveer in bowl met toppings'] },
                    { id: 'kip-3', name: 'Mediterrane Kip uit de Oven', description: 'Sappige kip met tomaten, olijven en feta.', emoji: 'ü´í', time: 45, difficulty: 'Makkelijk', calories: 390, ingredient: 'kip', method: 'oven', tags: ['Mediterraan', 'Gezond'], ingredients: ['4 kippendijen', '250g cherrytomaten', '100g olijven', '100g feta', 'Oregano'], steps: ['Verwarm oven 200¬∞C', 'Leg kip in ovenschaal', 'Verdeel tomaten en olijven', 'Bak 35-40 min', 'Verkruimel feta erover'] }
                ],
                'vis': [
                    { id: 'vis-1', name: 'Gebakken Zalm met Citroen', description: 'Perfecte zalm met krokante huid en frisse citroen.', emoji: 'üêü', time: 20, difficulty: 'Makkelijk', calories: 350, ingredient: 'vis', method: 'pan', tags: ['Snel', 'Gezond'], ingredients: ['4 zalmfilets', '1 citroen', 'Dille', 'Boter'], steps: ['Dep zalm droog', 'Bak met huid naar beneden 4 min', 'Draai om, bak 3 min', 'Serveer met citroen en dille'] },
                    { id: 'vis-2', name: 'Kabeljauw met Pesto Korst', description: 'Sappige kabeljauw met krokante pesto-parmezaan korst.', emoji: 'üêü', time: 25, difficulty: 'Makkelijk', calories: 320, ingredient: 'vis', method: 'oven', tags: ['Italiaans', 'Oven'], ingredients: ['4 kabeljauwfilets', '4 el groene pesto', '50g parmezaan', '50g paneermeel'], steps: ['Verwarm oven 200¬∞C', 'Meng pesto, kaas en paneermeel', 'Leg vis in schaal, bedek met mengsel', 'Bak 15-18 min'] }
                ],
                'rundvlees': [
                    { id: 'rund-1', name: 'Biefstuk met Pepersaus', description: 'Perfecte biefstuk met romige pepersaus.', emoji: 'ü•©', time: 20, difficulty: 'Gemiddeld', calories: 520, ingredient: 'rundvlees', method: 'pan', tags: ['Klassiek', 'Date night'], ingredients: ['2 biefstukken', '200ml room', '2 el groene peperkorrels', 'Boter', 'Cognac'], steps: ['Bak biefstuk naar wens', 'Laat rusten', 'Maak saus: peper, cognac, room', 'Serveer met saus'] }
                ],
                'tofu': [
                    { id: 'tofu-1', name: 'Crispy Tofu met Pindakassaus', description: 'Knapperige tofu in romige Aziatische pindakassaus.', emoji: 'ü•ú', time: 25, difficulty: 'Makkelijk', calories: 380, ingredient: 'tofu', method: 'pan', tags: ['Vegan', 'Aziatisch'], ingredients: ['400g firm tofu', '3 el pindakaas', '2 el sojasaus', '1 el sesamolie', 'Limoen'], steps: ['Pers tofu uit', 'Bak knapperig in maizena', 'Maak saus: pindakaas + soja + limoen', 'Meng en serveer'] }
                ],
                'groenten': [
                    { id: 'groenten-1', name: 'Shakshuka', description: 'Gepocheerde eieren in kruidige tomatensaus.', emoji: 'üç≥', time: 25, difficulty: 'Makkelijk', calories: 320, ingredient: 'groenten', method: 'pan', tags: ['Vegetarisch', 'Brunch'], ingredients: ['400g tomaten', '2 paprikas', '4 eieren', 'Komijn', 'Feta'], steps: ['Bak paprika en ui', 'Voeg tomaten en kruiden toe', 'Maak kuiltjes, breek eieren erin', 'Deksel erop tot eieren gaar'] }
                ],
                'garnalen': [
                    { id: 'garnalen-1', name: 'Knoflookgarnalen', description: 'Spaanse gambas al ajillo - simpel en heerlijk.', emoji: 'ü¶ê', time: 15, difficulty: 'Makkelijk', calories: 280, ingredient: 'garnalen', method: 'pan', tags: ['Spaans', 'Snel'], ingredients: ['400g garnalen', '6 teentjes knoflook', 'Rode peper', 'Olijfolie', 'Peterselie'], steps: ['Verhit olie met knoflook en peper', 'Voeg garnalen toe', 'Bak 2-3 min', 'Garneer met peterselie'] }
                ]
            };

            const key = criteria.ingredient?.toLowerCase();
            let results = recipes[key] || Object.values(recipes).flat().slice(0, 3);
            
            if (criteria.method && criteria.method !== 'geen voorkeur') {
                const filtered = results.filter(r => r.method === criteria.method);
                if (filtered.length > 0) results = filtered;
            }

            return results.map((r, i) => ({ ...r, id: `fallback-${Date.now()}-${i}` }));
        }
    </script>
</body>
</html>
